<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>古诗词</title>
    <script>
        var now_index = 0;
        const addNode = evnt => {
            const objE = document.createElement("div");
            objE.innerHTML = evnt.data;
            document.getElementById("gs-view").appendChild(objE.childNodes[0]);
            document.title = `古诗词(已加载${now_index.toString()})`;
            document.getElementById("prog").value = now_index / 3900;
            now_index++;
        }
        const wks = Array(8);
        for (let i = 0; i < 8; i++) {
            wks[i] = new Worker('./getpoetry.js');
            wks[i].onmessage = addNode;
        }
        const stop = () => wks.forEach(elem => elem.terminate())
    </script>
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="./main.css" rel="stylesheet">
</head>

<body>
    <progress id="prog" value="0" max="100" class="progTab"></progress>
    <div id="gs-view"></div>
    <script>
        for (let i = 0; i < 8; i++) {
            wks[i].postMessage(i);
        }
    </script>
</body>

</html>